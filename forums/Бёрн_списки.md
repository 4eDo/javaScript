# Общая информация
Код для списков в новом варианте написан так, что его можно весьма гибко менять. Данные подставляются скриптом, шаблоны настраиваются.

Весь код приводить не буду, только нужные куски, отвечающие за вид данных.

NB! Данные берутся из одного места для разных форм. Поэтому для контролирования регистра используйте в стилях:
- ```text-transform: lowercase;``` - нижний регистр;
- ```text-transform: uppercase;``` - КАПС;
- ```text-transform: capitalize;``` - Всё С Заглавных.

# Перед вниканием в основное
Тыкательный пример с тестовыми данными: https://codepen.io/4edo-the-reactor/pen/VwOayXN 

Заранее прошу прощения, но дизайн там отвалился (тянулся с форума напрямую), остался тупо текст. Скрины до отваливания можно попросить у админа.

Кратко: html-код теперь состоит из трёх частей:
- Источник данных (вынесенный в отдельный блок JSON, возможно, позже перенесу на отдельную страницу)
- Список шаблонов (просто болванки, в которые будут подставляться те или иные данные)
- Блок вывода (даже не блок, а сам код списков, в котором определённым образом помечены места для вывода тех или иных данных)

Усечённый код (без данных, тупо структура):
```html

<!-- В этом блоке все шаблоны. Каждый шаблон помечен отдельным идентификатором. --> 
<div hidden></div>

<!-- Статистика. Этот блок из разряда "потому что могу". Нужен или нет, а если нужен, то в каком варианте - всё к админу. Данные подставляются по id, остальное можно менять. -->
<details>
	<summary>Статистика (Клик чтобы развернуть)</summary>
<!-- Можно убирать куда угодно, главное сохранить id! -->
	<p><b>Всего персонажей:</b> <span id="stat_all"></span></p>
	<p><b>Женщин:</b> <span id="stat_f"></span></p>
	<p><b>Мужчин:</b> <span id="stat_m"></span></p>
	<p><b>Пожиратели:</b> <span id="stat_de"></span></p>
	<p><b>Сопротивление:</b> <span id="stat_cr"></span></p>
	<p><b>Министерство:</b> <span id="stat_mm"></span></p>
	<p><b>Нейтралитет:</b> <span id="stat_n"></span></p>
</details><br><br>

<span class="actitle">Список персонажей и занятость</span>
        
<div class="chars-nav">
	<a rel="all" class="filters current">Все персонажи</a>
	<a rel="death" class="filters">пожиратели смерти</a>
	<a rel="resistance" class="filters">гражданское сопротивление</a>
	<a rel="ministry" class="filters">министерство магии</a>
	<a rel="neutral" class="filters">нейтралитет</a>
</div>
	
<div class="chars-nav">
	<a class="lists" onclick="viewNames()">Список занятых имён</a>
	<a class="lists" onclick="viewSurnames()" >Список фамилий</a>
	<a class="lists" onclick="viewJobs()">список должностей</a>
	<a class="lists" onclick="viewFaces()">Cписок внешностей</a>
</div>

<!-- Это блоки, куда выводится информация. Их можно поместить как угодно, главное сохранить id. -->
<div style="
	display: flex;
	flex-direction: row;
	align-items: flex-start;
			 width: 900px;
">
	<!-- Это вывод всего подряд, без разбивки на М и Ж (должности, фамилии)-->
	<div class="listContainer" id="addonAll"></div>
	
	<!-- Это вывод с разбивкой по полу (имена, внешности) -->
		<!-- Это вывод информации по мужчинам -->
		<div class="listContainer" id="addonM"></div>
		<!-- Это вывод информации по женщинам -->
		<div class="listContainer" id="addonF"></div>
</div>
...

```

## NB!
**Если где-то нужны дополнительные данные, новые списки, обработка новых шаблонов - обращайся! Моя телега есть у админа. То же касается и вопросов по коду, по скриптам. Помогу.**

# Данные для подстановки
Данные подставляются вместо определённых обозначений.

- ```{{side}}``` - сторона персонажа, задаётся в данных. Сюда будет подставлено одно из:
  * de
  * cr
  * mm
  * n
    
- ```{{sideClass}}``` - выбирается на основании предыдущего пункта. В предыдущем варианте дизайна шло как отдельный класс. Сюда будет подставлено одно из:
  * death
  * resistance
  * ministry
  * neutral
  
- ```{{sideRu}}``` - сторона на русском. Сюда будет подставлено одно из:
  * пожиратели смерти
  * гражданское сопротивление
  * министерство магии
  * нейтралитет
- ```{{sub}}``` - сюда будет подставлена доп.информация о стороне (напр., "Дети Лютного"). Иначе ничего.
- ```{{sex}}``` - пол персонажа. Сюда будет подставлено одно из:
  * f
  * m
- ```{{profile}}``` - сюда будет подставлена ссылка на профиль игрока
- ```{{name}}``` - имя персонажа
- ```{{surname}}``` - фамилия персонажа
- ```{{age}}``` - возраст персонажа
- ```{{birth}}``` - дата рождения в формате "yyyy-mm-dd"
- ```{{blood}}``` - чистота крови, одно из:
  * pb
  * hb
  * mb
  * sq
- ```{{face}}``` - сюда будет подставлено имя внешности
- ```{{job}}``` - сюда будет подставлено место работы (В списке должностей - последняя после ", " часть).
- ```{{fullPath}}``` - полное наименование должности

**Заметка про должность:**

Должность задаётся по определённой схеме, от общего к частному. Пример:
> Больница Святого Мунго, 4 этаж, глава отделения
Для этой строки {{fullPath}} будет "Больница Святого Мунго, 4 этаж, глава отделения", а {{job}} - "глава отделения"

# Шаблоны
В эти шаблоны подставляются данные из предыдущего пункта.

Допустимо использовать как просто данные, так и в качестве составляющих.

Так код ```class="my_class-{{side}}"``` даст такие классы, как ```my_class-de```,  ```my_class-cr```,  ```my_class-mm```,  ```my_class-n```


## Основная карточка игрока
Тот самый прямоугольник в общем списке.
```html
<!-- 	Шаблон основной карточки игрока -->
<!-- 	(ТОЛЬКО содержимое блока CHAR_TEMPLATE, сам блок нужен ТОЛЬКО для идентификации): -->
	<div id="CHAR_TEMPLATE">
		
		<li class="{{sideClass}} all char {{sex}}">
			<div class="char_profile">
				<div class="char_profname">
					<a href="{{profile}}">
						<b>{{name}} {{surname}} {{age}} {{blood}}</b>
					</a>
				</div>
				<div class="char_profface">
					{{face}}
				</div>
				<div class="char_profinfo">
					{{sideRu}}
					<div class="subSide">{{sub}}</div>
					<br>
					{{job}}
				</div>
			</div>
		</li>
		
	</div>
<!-- 	Конец шаблона карточки игрока -->
```

## NB!
> В списках имён, фамилий и внешностей данные сортируются и выводятся в алфавитном порядке. Причём каждый своего рода подраздел помечается отдельно. Например:
>
> 
> -- A --
> 
> Andrew
> 
> Alex
> 
> -- B --
> 
> Bob
> 
> -- D --
> 
> David
> 
>
> Также в списке ИМЁН и ВНЕШНОСТЕЙ идёт разделение на мужские и женские.
## Первая буква имени / фамилии / внешности
```html
<!-- 	Шаблон выделения первой буквы в списках имён, фамилий, внешностей -->
<!-- 	(ТОЛЬКО содержимое блока FIRSTLETTER_TEMPLATE, сам блок нужен ТОЛЬКО для идентификации): -->
	<div id="FIRSTLETTER_TEMPLATE">
		
		<div style="text-transform: uppercase;">-- <b>{{letter}}</b> --</div>
		
	</div>
<!-- 	Конец шаблона выделения первой буквы -->	
```
## Отображение в списке занятых имён
```html 
<!-- 	Шаблон строки при просмотре занятых имён -->
<!-- 	(ТОЛЬКО содержимое блока NAMELIST_TEMPLATE, сам блок нужен ТОЛЬКО для идентификации): -->
	<div id="NAMELIST_TEMPLATE">
		
		<p><a href="{{profile}}"><span style="text-transform: capitalize;">{{name}} {{surname}} (<side style="text-transform: uppercase;">{{side}}</side>)</span></a></p>
		
	</div>
<!-- 	Конец шаблона строки при просмотре занятых имён -->
```

## Отображение в списке фамилий
```html
<!-- 	Шаблон строки при просмотре списка фамилий -->
<!-- 	(ТОЛЬКО содержимое блока SURNAMELIST_TEMPLATE, сам блок нужен ТОЛЬКО для идентификации): -->
	<div id="SURNAMELIST_TEMPLATE">
		
		<p><a href="{{profile}}"><span style="text-transform: uppercase;">{{surname}}</span>, <span style="text-transform: capitalize;">{{name}}</span>, {{side}}</a></p>
		
	</div>
<!-- 	Конец шаблона строки при просмотре списка фамилий -->
```

## Отображение в списке внешностей
```html
<!-- 	Шаблон строки при просмотре списка внешностей -->
<!-- 	(ТОЛЬКО содержимое блока FACELIST_TEMPLATE, сам блок нужен ТОЛЬКО для идентификации): -->
	<div id="FACELIST_TEMPLATE">
		
		<p><a href="{{profile}}">{{face}} - {{name}} {{surname}}</a></p>
		
	</div>
<!-- 	Конец шаблона строки при просмотре списка внешностей -->
```

## Нюанс заполнения списка должностей.

Для удобства просмотра и более-менее красивого вида места работы не только сортируются в алфавитном порядке, но и выводятся без лишнего.

Так список их трёх должностей будет выведен:
```
Больница Святого Мунго
  4 этаж
    глава отделения: ...
    заместитель главы: ...
  3 этаж:
    стажёр: ...
Министерство Магии
  1 этаж
    привет-ведьма: ...
```

## Отображение в списке должностей. Место работы.

Это все те "уровни" места работы, которые предшествуют непосредственной должности.

Вместо ```{{pathLevel}}``` будет подставлен уровень вложенности. Используется для маркировки класса, чтобы задать сообразный ситуации отступ.

```html
<!-- 	Шаблон выделения места работы -->
<!-- 	Например, при месте работы "Министерство Магии, 1 этаж, привет-ведьма" заголовки будут иметь вид: -->
<!-- 	<div class="pathlevel-0"><b>Министерство Магии</b></div> -->
<!-- 	<div class="pathlevel-1"><b>1 этаж</b></div> -->
<!-- 	(ТОЛЬКО содержимое блока JOBPATH_TEMPLATE, сам блок нужен ТОЛЬКО для идентификации): -->
	<div id="JOBPATH_TEMPLATE">
		
		<div class="pathlevel-{{pathLevel}} pathlevels"><b>{{path}}</b></div>
		
	</div>
<!-- 	Конец шаблона выделения места работы -->
```

## Отображение в списке должностей. Сама должность.
Вывод непосредственной должности пеерсонажа (глава, заместитель, привет-ведьма и т.п.)

Полную часть тоже можно выводить. Я не вижу в этом смысла, но возможность оставлена.
```html
<!-- 	Шаблон строки при просмотре списка должностей -->
<!-- 	(ТОЛЬКО содержимое блока JOBLIST_TEMPLATE, сам блок нужен ТОЛЬКО для идентификации): -->
	<div id="JOBLIST_TEMPLATE">
		
		<p class="pathlevel-{{currLevel}}-final" ><span style="display: none;">{{fullPath}}</span> {{job}}: <a href="{{profile}}">{{name}} {{surname}}, {{side}}</a></p>
		
	</div>
<!-- 	Конец шаблона строки при просмотре списка должностей -->
```

# Блоки для вывода информации
## Статистика
Не знаю, нужен ли этот блок. Можно убрать, можно оставить. Админ скажет точнее, я лишь показываю, что это вполне реально. Формат вывода любой, числа подставляются по id.
```html
<!-- Статистика. Данные подставляются по id, остальное можно менять. -->
<details>
	<summary>Статистика (Клик чтобы развернуть)</summary>
<!-- Можно убирать куда угодно, главное сохранить id! -->
	<p><b>Всего персонажей:</b> <span id="stat_all"></span></p>
	<p><b>Женщин:</b> <span id="stat_f"></span></p>
	<p><b>Мужчин:</b> <span id="stat_m"></span></p>
	<p><b>Пожиратели:</b> <span id="stat_de"></span></p>
	<p><b>Сопротивление:</b> <span id="stat_cr"></span></p>
	<p><b>Министерство:</b> <span id="stat_mm"></span></p>
	<p><b>Нейтралитет:</b> <span id="stat_n"></span></p>
</details><br><br>
```
## Общий список
Данные подставляются по ID. 
```html
	<!-- Это вывод всего подряд, без разбивки на М и Ж (должности, фамилии)-->
	<div class="listContainer" id="addonAll"></div>
```

## Список с разбиением на женщин и мужчин
У меня реализовано в виде разных колонок, но можно играться как угодно.
```html
	<!-- Это вывод с разбивкой по полу (имена, внешности) -->
		<!-- Это вывод информации по мужчинам -->
		<div class="listContainer" id="addonM"></div>
		<!-- Это вывод информации по женщинам -->
		<div class="listContainer" id="addonF"></div>
```
